(function(e){function r(t,r,i,s,o,u){function S(t){var n={actor:E,object:w};if(d){n["context"]={contextActivities:{other:[{id:"compID:"+d}]}}}if(t){n["verb"]=e.verbs.launched}else{var r="PT"+a.roundTime()+"S";n["verb"]=e.verbs.resumed;n["result"]={extensions:{"resultExt:resumed":r}}}k(n)}function x(t,n){var r={id:b+"#"+t,definition:{name:{"en-US":f+"#"+t}}};var i="PT"+n+"S";var s="resultExt:"+t;var o={extensions:{}};var u={actor:E,verb:e.verbs.progressed,object:r,result:o};var a={contextActivities:{parent:[{id:b}]}};if(d){a["contextActivities"]["other"]=[{id:"compID:"+d}]}u["context"]=a;o["extensions"][s]=i;k(u)}function T(t){var n="PT"+t+"S";var r={actor:E,verb:e.verbs.suspended,object:w,result:{extensions:{"resultExt:paused":n}}};if(d){r["context"]={contextActivities:{other:[{id:"compID:"+d}]}}}k(r)}function N(t){var n="PT"+t+"S";var r={actor:E,verb:e.verbs.interacted,object:w,result:{extensions:{"resultExt:seeked":n}}};if(d){r["context"]={contextActivities:{other:[{id:"compID:"+d}]}}}k(r)}function C(t){var n="PT"+Math.round(t)+"S";var r={actor:E,verb:e.verbs.completed,object:w,result:{duration:n,completion:true}};if(d){r["context"]={contextActivities:{other:[{id:"compID:"+d}]}}}k(r);l=c=h=false}function k(t){if(t){t["timestamp"]=(new Date).toISOString();if(p){e.XAPIWrapper.sendStatement(t,function(){})}else{n("would send this statement if 'isTracking' was true.");n(t)}}}var a=t;var f=t.media.id;var l=false;var c=false;var h=false;var p=true;var d=r;var v=u;var m=o;var g=s;var y=i;var b="act:unknown";if(t.media.children){b=t.media.children[0].src}else{b=t.media.src}var w={id:b,definition:{name:{"en-US":f}}};var E=e.XAPIWrapper.lrs.actor?e.XAPIWrapper.lrs.actor:{account:{name:"tester",homePage:"uri:testaccount"}};a.on("play",function(){if(y){var e=a.currentTime();if(e==Math.round(a.duration())){n("youtube video "+f+" launched weird");S(true)}else if(e!=0){n("video "+f+" resumed");S(false)}else{n("video "+f+" launched");S(true)}}});a.on("timeupdate",function(){if(v){var e=a.roundTime();if(!l&&e==Math.round(a.duration()*.25)){n("video "+f+" first point");l=true;x("firstquartile",e)}else if(!c&&e==Math.round(a.duration()*.5)){n("video "+f+" half point");c=true;x("halfway",e)}else if(!h&&e==Math.round(a.duration()*.75)){n("video "+f+" third point");h=true;x("thirdquartile",e)}}});a.on("pause",function(){if(g){var e=a.roundTime();if(e!=Math.round(a.duration())){n("video "+f+" paused");T(e)}}});a.on("seeked",function(){if(m){var e=a.roundTime();if(e!=0){n("seeked "+f+" to "+e);N(e)}else{n("seeked to 0s so really launched "+f);S(true);l=c=h=false}}});a.on("ended",function(){n("video "+f+" ended");C(a.duration())});this.report=k}var t=true;var n=function(e){if(!t)return false;try{console.log(e);return true}catch(n){return false}};var i=function(){this._videos={}};i.prototype.addVideo=function(e,t,n,i,s,o){try{var u=e.media.id;var a=new r(e,t,n,i,s,o)}catch(f){throw"Cannot add video: "+f.message}this._videos[u]=a;return true};i.prototype.getVideo=function(e){try{return this._videos[e]}catch(t){return{}}};i.prototype.getVideos=function(){var e=[];for(var t in this._videos){e.push(t)}return e};e.XAPIVideo=new i})(window.ADL=window.ADL||{})
